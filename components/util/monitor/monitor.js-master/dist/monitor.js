define("alipay/monitor/2.0.0/monitor",["arale/detector/1.1.1/detector"],function(e,r,n){function o(e){return Object.prototype.toString.call(e)}function t(e){var r;if(null===e)return null;switch(o(e)){case"[object String]":case"object Number":case"[object Boolean]":r=e;break;case"[object Array]":r=[];for(var n=e.length-1;n>=0;n--)r[n]=t(e[n]);break;case"[object RegExp]":r=RegExp(e.source,(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":""));break;case"[object Date]":r=new Date(e.valueOf());break;case"[object Error]":e=r;break;case"[object Object]":r={};for(var i in e)u(e,i)&&(r[i]=t(e[i]));break;default:throw Error("Not support the type.")}return r}function i(e,r){if(!r)return e;for(var n in r)u(r,n)&&(e[n]=r[n]);return e}function a(){return(""+Math.random()).slice(-6)}function c(e){if(void 0===e||"string"!=typeof e)return"";var r=e.indexOf(";jsessionid=");if(r>=0)return e.substr(0,r);if(e.indexOf("/min/?")>=0)return e;do{if(r=e.indexOf("?",r),0>r)break;if("?"!==e.charAt(r+1))break;r+=2}while(r>=0);return 0>r?e:e.substr(0,r)}function f(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var r=[];for(var n in e)if(u(e,n))if("[object Array]"===o(e[n]))for(var t=0,i=e[n].length;i>t;t++)r.push(n+"="+encodeURIComponent(e[n][t]));else r.push(n+"="+encodeURIComponent(e[n]));return r.join("&")}function u(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function l(e,r,n){if(n||(n=function(){}),!r)return n();var o=f(r),t=e+(0>e.indexOf("?")?"?":"&")+o;if(t.length>h)return n();var i=new Image(1,1);i.onload=i.onerror=i.onabort=function(){n(),i.onload=i.onerror=i.onabort=null,i=null},i.src=t}function s(){if(A&&!O){var e=m._DATAS.shift();if(e){O=!0;var r=t(y);"jserror"===e.profile&&(e.file=c(e.file)),r=i(r,e),r.rnd=a(),l(j,r,function(){O=!1,s()})}}}var b=window,d=document,p=window.location,m=b.monitor;b.monitor||(m=window.monitor={},m._DATAS=[]);var g=e("arale/detector/1.1.1/detector"),v="2.0",j="https://magentmng.alipay.com/m.gif",h=g.engine.trident?2083:8190,w=c(p.href),A=!1,y={url:w,ref:d.referrer||"-",clnt:g.device.name+"/"+g.device.fullVersion+"|"+g.os.name+"/"+g.os.fullVersion+"|"+g.browser.name+"/"+g.browser.fullVersion+"|"+g.engine.name+"/"+g.engine.fullVersion,v:v},O=!1,k=m._DATAS.push;m._DATAS.push=function(){k.apply(m._DATAS,arguments),s()},m.boot=function(e){A=e!==!1},window.monitor=m,n.exports=m});
