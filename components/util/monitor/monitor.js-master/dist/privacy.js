define("alipay/monitor/2.0.0/privacy",["./idcard","./bankcard","./mobilephone","./monitor","arale/detector/1.1.1/detector"],function(r,e){function n(r){return(r+"").replace(c,"$1...$2")}var t=r("./idcard"),o=r("./bankcard"),i=r("./mobilephone"),a=r("./monitor"),c=/^(.{4}).*(.{4})$/;e.scan=function(r){var e=/\b\d{11,19}X?\b/g,c=r.match(e);if(c)for(var f,u=0,s=c.length;s>u;u++)f=c[u],i.verify(f)?a.log("mobile="+n(f),"sens"):t.verify(f)?a.log("idcard="+n(f),"sens"):o.verify(f)&&a.log("bankcard="+n(f),"sens")}}),define("alipay/monitor/2.0.0/idcard",[],function(r,e){function n(r){return 0===r%4&&0!==r%400||0===r%400}function t(r,e,t){if(1>e||e>12)return!1;var o=c[e];return 2===e&&n(r)&&(o=29),t>0&&o>=t}function o(r){if(!/^[0-9]{15}$/.test(r))return!1;var e=parseInt("19"+r.substr(6,2),10),n=parseInt(r.substr(8,2),10),o=parseInt(r.substr(10,2),10);return t(e,n,o)?!0:!1}function i(r){if(!/^[0-9]{17}[0-9xX]$/.test(r))return!1;var e=parseInt(r.substr(6,4),10),n=parseInt(r.substr(10,2),10),o=parseInt(r.substr(12,2),10),i=r.substr(17,1);if(!t(e,n,o))return!1;for(var a=0,c=0;17>c;c++)a+=parseInt(r.charAt(c),10)*f[c];var s=a%11;return u.charAt(s)===i}function a(r){return r?(r+="",18===r.length?i(r):15===r.length?o(r):!1):!1}var c=[0,31,28,31,30,31,30,31,31,30,31,30,31],f=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],u="10X98765432";e.verify=a}),define("alipay/monitor/2.0.0/bankcard",[],function(r,e){function n(r){for(var e,n,t=0,o=r.length-1;o>=0;o--)e=parseInt(r.charAt(o),10),n=o%2===r.length%2,n&&(e=2*e,e>9&&(e-=9)),t+=e;return 0===t%10}var t=/^[0-9]{13,19}$/;e.verify=function(r){return r+="",t.test(r)&&n(r)}}),define("alipay/monitor/2.0.0/mobilephone",[],function(r,e){var n=/^(?:13[0-9]|14[57]|15[0-35-9]|18[0-9])\d{8}$/;e.verify=function(r){return n.test(r)}}),define("alipay/monitor/2.0.0/monitor",["arale/detector/1.1.1/detector"],function(r,e,n){function t(r){return Object.prototype.toString.call(r)}function o(r){var e;if(null===r)return null;switch(t(r)){case"[object String]":case"object Number":case"[object Boolean]":e=r;break;case"[object Array]":e=[];for(var n=r.length-1;n>=0;n--)e[n]=o(r[n]);break;case"[object RegExp]":e=RegExp(r.source,(r.ignoreCase?"i":"")+(r.global?"g":"")+(r.multiline?"m":""));break;case"[object Date]":e=new Date(r.valueOf());break;case"[object Error]":r=e;break;case"[object Object]":e={};for(var i in r)u(r,i)&&(e[i]=o(r[i]));break;default:throw Error("Not support the type.")}return e}function i(r,e){if(!e)return r;for(var n in e)u(e,n)&&(r[n]=e[n]);return r}function a(){return(""+Math.random()).slice(-6)}function c(r){if(void 0===r||"string"!=typeof r)return"";var e=r.indexOf(";jsessionid=");if(e>=0)return r.substr(0,e);if(r.indexOf("/min/?")>=0)return r;do{if(e=r.indexOf("?",e),0>e)break;if("?"!==r.charAt(e+1))break;e+=2}while(e>=0);return 0>e?r:r.substr(0,e)}function f(r){if("[object Object]"!==Object.prototype.toString.call(r))return"";var e=[];for(var n in r)if(u(r,n))if("[object Array]"===t(r[n]))for(var o=0,i=r[n].length;i>o;o++)e.push(n+"="+encodeURIComponent(r[n][o]));else e.push(n+"="+encodeURIComponent(r[n]));return e.join("&")}function u(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function s(r,e,n){if(n||(n=function(){}),!e)return n();var t=f(e),o=r+(0>r.indexOf("?")?"?":"&")+t;if(o.length>j)return n();var i=new Image(1,1);i.onload=i.onerror=i.onabort=function(){n(),i.onload=i.onerror=i.onabort=null,i=null},i.src=o}function l(){if(w&&!O){var r=m._DATAS.shift();if(r){O=!0;var e=o(A);"jserror"===r.profile&&(r.file=c(r.file)),e=i(e,r),e.rnd=a(),s(h,e,function(){O=!1,l()})}}}var b=window,d=document,p=window.location,m=b.monitor;b.monitor||(m=window.monitor={},m._DATAS=[]);var v=r("arale/detector/1.1.1/detector"),g="2.0",h="https://magentmng.alipay.com/m.gif",j=v.engine.trident?2083:8190,y=c(p.href),w=!1,A={url:y,ref:d.referrer||"-",clnt:v.device.name+"/"+v.device.fullVersion+"|"+v.os.name+"/"+v.os.fullVersion+"|"+v.browser.name+"/"+v.browser.fullVersion+"|"+v.engine.name+"/"+v.engine.fullVersion,v:g},O=!1,k=m._DATAS.push;m._DATAS.push=function(){k.apply(m._DATAS,arguments),l()},m.boot=function(r){w=r!==!1},window.monitor=m,n.exports=m});
